{% extends "base.html" %}
{% block title %}旗を立てる｜集合場所・日時{% endblock %}

{% block content %}

<!-- ステップ表示 -->
<div class="flex items-center gap-1.5 mb-6 text-xs overflow-x-auto pb-1">
  <span class="bg-green-200 text-green-700 rounded-full w-5 h-5 flex items-center justify-center font-bold shrink-0">1</span>
  <span class="text-gray-400 shrink-0">イベント選択</span>
  <span class="text-gray-300">›</span>
  <span class="bg-green-200 text-green-700 rounded-full w-5 h-5 flex items-center justify-center font-bold shrink-0">2</span>
  <span class="text-gray-400 shrink-0">気持ち入力</span>
  <span class="text-gray-300">›</span>
  <span class="bg-green-200 text-green-700 rounded-full w-5 h-5 flex items-center justify-center font-bold shrink-0">3</span>
  <span class="text-gray-400 shrink-0">条件を選ぶ</span>
  <span class="text-gray-300">›</span>
  <span class="bg-green-600 text-white rounded-full w-5 h-5 flex items-center justify-center font-bold shrink-0">4</span>
  <span class="text-green-600 font-medium shrink-0">集合情報</span>
  <span class="text-gray-300">›</span>
  <span class="text-gray-400 shrink-0">確認</span>
</div>

<h1 class="text-2xl font-bold text-gray-900 mb-2">集合場所と日時を<br>入力してください</h1>
<p class="text-sm text-gray-500 mb-6">一緒に行く人との当日の待ち合わせ情報です。</p>

<form method="post" action="/create/confirm">
  <!-- 前のステップの値を引き継ぐ -->
  <input type="hidden" name="event_id" value="{{ event_id }}" />
  <input type="hidden" name="nickname" value="{{ nickname }}" />
  <input type="hidden" name="anxiety_level" value="{{ anxiety_level }}" />
  <input type="hidden" name="vibe" value="{{ vibe }}" />
  <input type="hidden" name="reason" value="{{ reason }}" />
  <input type="hidden" name="group_size" value="{{ group_size }}" />
  <input type="hidden" name="gender_pref" value="{{ gender_pref }}" />
  <input type="hidden" name="member_type" value="{{ member_type }}" />
  <input type="hidden" name="sns_type" value="{{ sns_type }}" />
  <input type="hidden" name="sns_account" value="{{ sns_account }}" />
  <input type="hidden" name="email" value="{{ email }}" />

  <div class="grid grid-cols-1 gap-5">

    <!-- 集合場所 -->
    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-1">
        集合場所 <span class="text-green-600">*</span>
      </label>
      <input type="text" name="meeting_place" required
             placeholder="例：市民公園 正面入口"
             class="w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-green-300" />
      <p class="text-xs text-gray-400 mt-1">わかりやすい場所を書いてください。</p>
    </div>

    <!-- 集合日時 -->
    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-2">
        集合日時 <span class="text-green-600">*</span>
      </label>
      <!-- 日付：イベント開催日を自動セット（読み取り専用） -->
      <div class="bg-green-50 rounded-xl border border-green-100 px-4 py-3 mb-2 flex items-center gap-3">
        <span class="text-green-500">📅</span>
        <div class="flex-1">
          <p class="text-xs text-green-700 font-medium">集合日（イベント開催日）</p>
          <p class="text-sm font-bold text-gray-800 mt-0.5">{{ event.event_date }}</p>
        </div>
        <span class="text-xs text-green-500">自動設定</span>
      </div>
      <input type="hidden" name="meeting_date" value="{{ event.event_date }}" />
      <!-- 時間のみ指定 -->
      <label class="block text-xs text-gray-500 mb-1">集合時間</label>
      <input type="time" name="meeting_time_only" required
             class="w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-green-300" />
    </div>

    <!-- 締め切り日 -->
    <div>
      <label class="block text-sm font-semibold text-gray-700 mb-1">
        参加締め切り日 <span class="text-green-600">*</span>
      </label>
      <input type="date" name="deadline" required
             class="w-full border border-gray-200 rounded-xl px-4 py-2.5 text-sm focus:outline-none focus:ring-2 focus:ring-green-300" />
      <p class="text-xs text-gray-400 mt-1">締め切り後は参加受付を終了します。</p>
    </div>

  </div>

  <!-- 注意事項 -->
  <div class="mt-6 bg-amber-50 rounded-xl border border-amber-100 p-4">
    <p class="text-xs text-amber-700 leading-relaxed">
      <span class="font-semibold">メモ：</span>
      当日の連絡（遅刻など）はアプリ内では行いません。
      一緒に行く人が決まったら、SNSを通じて直接連絡を取り合ってください。
    </p>
  </div>

  <button type="submit"
          class="mt-8 w-full bg-green-600 text-white font-bold py-4 rounded-2xl hover:bg-green-700 transition-colors text-base">
    確認画面へ →
  </button>
</form>

{% endblock %}
