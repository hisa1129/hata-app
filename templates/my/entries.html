{% extends "base.html" %}
{% block title %}ãƒã‚¤ã‚¨ãƒ³ãƒˆãƒªãƒ¼ï½œæ——ã‚¢ãƒ—ãƒª{% endblock %}

{% block content %}

<h1 class="text-2xl font-bold text-gray-900 mb-1">ãƒã‚¤ã‚¨ãƒ³ãƒˆãƒªãƒ¼</h1>
<p class="text-sm text-gray-500 mb-6">æ‰‹ã‚’æŒ™ã’ãŸæ——ã®ä¸€è¦§ã¨æ‰¿èªçŠ¶æ³ã§ã™ã€‚</p>

{% if entries %}
  <div class="grid grid-cols-1 gap-4">
    {% for entry in entries %}
    <div class="bg-white rounded-2xl border border-gray-100 p-5">

      <!-- ã‚¤ãƒ™ãƒ³ãƒˆå -->
      <div class="flex items-center gap-2 mb-3">
        <span class="text-base">
          {% if entry.event.category == "ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢" %}ğŸŒ±
          {% elif entry.event.category == "ç¥­ã‚Šãƒ»åœ°åŸŸè¡Œäº‹" %}ğŸ†
          {% else %}ğŸ› ï¸
          {% endif %}
        </span>
        <div>
          <p class="text-xs text-gray-400">{{ entry.event.category }}</p>
          <p class="font-bold text-gray-900 text-sm">{{ entry.event.title }}</p>
        </div>
        <!-- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãƒãƒƒã‚¸ -->
        {% if entry.status == "æ‰¿èªå¾…ã¡" %}
          <span class="ml-auto shrink-0 text-xs bg-amber-100 text-amber-700 px-2.5 py-1 rounded-full font-medium">æ‰¿èªå¾…ã¡</span>
        {% elif entry.status == "æ‰¿èªæ¸ˆã¿" %}
          <span class="ml-auto shrink-0 text-xs bg-green-100 text-green-700 px-2.5 py-1 rounded-full font-medium">æ‰¿èªæ¸ˆã¿</span>
        {% else %}
          <span class="ml-auto shrink-0 text-xs bg-gray-100 text-gray-500 px-2.5 py-1 rounded-full font-medium">æ£„å´</span>
        {% endif %}
      </div>

      <!-- æ——ã‚’ç«‹ã¦ãŸäºº -->
      <div class="bg-gray-50 rounded-xl p-3 mb-3">
        <p class="text-xs text-gray-400 mb-1">æ——ã‚’ç«‹ã¦ãŸäºº</p>
        <div class="flex items-center gap-2">
          <div class="w-7 h-7 bg-green-100 rounded-full flex items-center justify-center text-xs font-bold text-green-700 shrink-0">
            {{ entry.flag.nickname[0] }}
          </div>
          <p class="text-sm font-semibold text-gray-800">{{ entry.flag.nickname }}</p>
          <span class="text-xs text-gray-400 ml-auto">{{ entry.event.event_date }}</span>
        </div>
      </div>

      <!-- æ‰¿èªæ¸ˆã¿ã®å ´åˆ -->
      {% if entry.status == "æ‰¿èªæ¸ˆã¿" %}
        <div class="bg-green-50 rounded-xl border border-green-100 p-3 mb-3">
          <p class="text-xs text-green-700 leading-relaxed">
            å‚åŠ å–ã‚Šã‚„ã‚ã®å ´åˆã¯SNSã¾ãŸã¯ãƒ¡ãƒ¼ãƒ«ã§æ——ã‚’ç«‹ã¦ãŸæ–¹ã«ç›´æ¥ã”é€£çµ¡ãã ã•ã„ã€‚
          </p>
        </div>
      {% endif %}

      <!-- æ——ã®è©³ç´°ãƒªãƒ³ã‚¯ + å–ã‚Šä¸‹ã’ãƒœã‚¿ãƒ³ -->
      <div class="flex items-center justify-between mt-2">
        <a href="/flags/{{ entry.flag.id }}"
           class="text-xs text-green-600 font-medium hover:text-green-800 transition-colors">
          æ——ã®è©³ç´°ã‚’è¦‹ã‚‹ â†’
        </a>
        {% if entry.status == "æ‰¿èªå¾…ã¡" %}
          <button type="button"
                  class="text-xs text-red-500 border border-red-200 px-3 py-1.5 rounded-full hover:bg-red-50 transition-colors">
            ã‚¨ãƒ³ãƒˆãƒªãƒ¼ã‚’å–ã‚Šä¸‹ã’ã‚‹
          </button>
        {% endif %}
      </div>

    </div>
    {% endfor %}
  </div>

{% else %}
  <div class="bg-white rounded-2xl border border-gray-100 p-8 text-center">
    <div class="text-4xl mb-3">ğŸ™‹</div>
    <p class="font-bold text-gray-700 mb-2">ã¾ã ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãŒã‚ã‚Šã¾ã›ã‚“</p>
    <p class="text-sm text-gray-500 leading-relaxed">æ°—ã«ãªã‚‹æ——ã‚’è¦‹ã¤ã‘ã¦æ‰‹ã‚’æŒ™ã’ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
    <a href="/find/step1"
       class="inline-block mt-5 bg-green-600 text-white font-bold py-3 px-6 rounded-2xl hover:bg-green-700 transition-colors text-sm">
      æ——ã‚’æ¢ã™ â†’
    </a>
  </div>
{% endif %}

<div class="mt-6 text-center">
  <a href="/" class="text-sm text-gray-400 hover:text-green-600 transition-colors">â† ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</a>
</div>

{% endblock %}
