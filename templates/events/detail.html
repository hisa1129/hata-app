{% extends "base.html" %}
{% block title %}{{ event.title }}{% endblock %}

{% block content %}

<!-- ã‚¤ãƒ™ãƒ³ãƒˆæƒ…å ± -->
<div class="bg-white rounded-2xl border border-gray-100 p-5 mb-6">
  <div class="flex items-center gap-2 mb-3">
    <span class="text-2xl">
      {% if event.category == "ãƒœãƒ©ãƒ³ãƒ†ã‚£ã‚¢" %}ğŸŒ±
      {% elif event.category == "ç¥­ã‚Šãƒ»åœ°åŸŸè¡Œäº‹" %}ğŸ†
      {% else %}ğŸ› ï¸
      {% endif %}
    </span>
    <span class="text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-full font-medium">{{ event.category }}</span>
  </div>

  <h1 class="text-2xl font-bold text-gray-900 mb-2">{{ event.title }}</h1>
  <p class="text-sm text-gray-500 leading-relaxed mb-4">{{ event.description }}</p>

  <div class="grid grid-cols-1 gap-2 text-sm">
    <div class="flex items-center gap-2 text-gray-600">
      <span class="text-base">ğŸ“…</span>
      <span><span class="text-gray-400">é–‹å‚¬æ—¥ï¼š</span>{{ event.event_date }}</span>
    </div>
    <div class="flex items-center gap-2 text-gray-600">
      <span class="text-base">ğŸ“</span>
      <span><span class="text-gray-400">å ´æ‰€ï¼š</span>{{ event.location }}</span>
    </div>
  </div>
</div>

<!-- ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã«ç«‹ã£ã¦ã„ã‚‹æ—— -->
<div class="mb-2 flex items-center justify-between">
  <h2 class="font-bold text-gray-800">ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã®æ——</h2>
  <span class="text-xs text-gray-400">{{ flags | length }} ä»¶</span>
</div>

{% if flags %}
  <div class="grid grid-cols-1 gap-4">
    {% for flag in flags %}
    <a href="/flags/{{ flag.id }}"
       class="block bg-white rounded-2xl border border-gray-100 p-5 hover:shadow-md hover:border-green-200 transition-all">

      <!-- æ——ã‚’ç«‹ã¦ãŸäºº -->
      <div class="flex items-center gap-3 mb-3">
        <div class="w-9 h-9 bg-green-100 rounded-full flex items-center justify-center text-base font-bold text-green-700 shrink-0">
          {{ flag.nickname[0] }}
        </div>
        <div>
          <p class="font-bold text-gray-900 text-sm">{{ flag.nickname }}</p>
          <div class="flex gap-1.5 mt-0.5">
            <span class="text-xs bg-green-50 text-green-700 border border-green-100 px-2 py-0.5 rounded-full">{{ flag.anxiety_level }}</span>
            <span class="text-xs bg-green-50 text-green-700 border border-green-100 px-2 py-0.5 rounded-full">{{ flag.vibe }}</span>
          </div>
        </div>
        <span class="ml-auto shrink-0 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium">{{ flag.status }}</span>
      </div>

      <!-- æ°—æŒã¡ -->
      <div class="bg-green-50 rounded-xl p-3 mb-3">
        <p class="text-xs text-green-700 font-medium mb-1">è¡ŒããŸã„ç†ç”±</p>
        <p class="text-sm text-gray-700 leading-relaxed line-clamp-2">{{ flag.reason }}</p>
      </div>

      <!-- ãƒ¡ã‚¿æƒ…å ± -->
      <div class="flex flex-wrap gap-2 text-xs text-gray-500">
        <span class="bg-gray-100 px-2 py-1 rounded-full">{{ flag.group_size }}</span>
        <span class="bg-gray-100 px-2 py-1 rounded-full">{{ flag.member_type }}</span>
        <span class="bg-gray-100 px-2 py-1 rounded-full">ç· ã‚åˆ‡ã‚Š {{ flag.deadline }}</span>
      </div>

      <div class="mt-3 text-right text-sm text-green-600 font-medium">æ——ã®è©³ç´°ã‚’è¦‹ã‚‹ â†’</div>
    </a>
    {% endfor %}
  </div>

{% else %}
  <div class="bg-white rounded-2xl border border-gray-100 p-8 text-center">
    <div class="text-4xl mb-3">ğŸš©</div>
    <p class="font-bold text-gray-700 mb-2">ã¾ã æ——ãŒã‚ã‚Šã¾ã›ã‚“</p>
    <p class="text-sm text-gray-500 leading-relaxed">
      ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã¸ã®æ——ã‚’æœ€åˆã«ç«‹ã¦ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ
    </p>
    <a href="/create/step1"
       class="inline-block mt-5 bg-green-600 text-white font-bold py-3 px-6 rounded-2xl hover:bg-green-700 transition-colors text-sm">
      æ——ã‚’ç«‹ã¦ã‚‹ â†’
    </a>
  </div>
{% endif %}

<div class="mt-6 text-center">
  <a href="/" class="text-sm text-gray-400 hover:text-green-600 transition-colors">â† ãƒˆãƒƒãƒ—ã«æˆ»ã‚‹</a>
</div>

{% endblock %}
