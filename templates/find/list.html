{% extends "base.html" %}
{% block title %}æ——ä¸€è¦§{% endblock %}

{% block content %}

<!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æƒ…å ± -->
<div class="mb-6">
  <h1 class="text-xl font-bold text-gray-900 mb-2">ã“ã‚“ãªæ——ãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ</h1>
  <div class="flex flex-wrap gap-2">
    <span class="text-xs bg-orange-100 text-orange-700 px-3 py-1 rounded-full font-medium">{{ category }}</span>
    <span class="text-xs bg-orange-100 text-orange-700 px-3 py-1 rounded-full font-medium">{{ vibe }}</span>
    <span class="text-xs bg-gray-100 text-gray-600 px-3 py-1 rounded-full">{{ anxiety_level }}</span>
  </div>
</div>

{% if flags %}
  <div class="grid grid-cols-1 gap-4">
    {% for flag in flags %}
      {% set event = events[flag.event_id] %}
      <a href="/flags/{{ flag.id }}"
         class="block bg-white rounded-2xl border border-gray-100 p-5 hover:shadow-md hover:border-orange-200 transition-all">

        <!-- ã‚¤ãƒ™ãƒ³ãƒˆå -->
        <div class="flex items-start justify-between gap-2 mb-3">
          <div>
            <p class="text-xs text-gray-400 mb-0.5">{{ event.category }}</p>
            <h2 class="font-bold text-gray-900">{{ event.title }}</h2>
          </div>
          <span class="shrink-0 text-xs bg-green-100 text-green-700 px-2 py-1 rounded-full font-medium">{{ flag.status }}</span>
        </div>

        <!-- æ——ã‚’ç«‹ã¦ãŸäººã®æ°—æŒã¡ -->
        <div class="bg-orange-50 rounded-xl p-3 mb-3">
          <p class="text-xs text-orange-600 font-medium mb-1">{{ flag.nickname }} ã•ã‚“ã®æ°—æŒã¡</p>
          <p class="text-sm text-gray-700 leading-relaxed line-clamp-3">{{ flag.reason }}</p>
        </div>

        <!-- ãƒ¡ã‚¿æƒ…å ± -->
        <div class="flex flex-wrap gap-2 text-xs">
          <span class="bg-gray-100 text-gray-600 px-2 py-1 rounded-full">{{ flag.vibe }}</span>
          <span class="bg-gray-100 text-gray-600 px-2 py-1 rounded-full">{{ flag.group_size }}</span>
          <span class="bg-gray-100 text-gray-600 px-2 py-1 rounded-full">{{ flag.member_type }}</span>
          <span class="bg-gray-100 text-gray-600 px-2 py-1 rounded-full">ç· ã‚åˆ‡ã‚Š {{ flag.deadline }}</span>
        </div>

        <div class="mt-3 text-right text-sm text-orange-500 font-medium">è©³ç´°ã‚’è¦‹ã‚‹ â†’</div>
      </a>
    {% endfor %}
  </div>

{% else %}
  <!-- çµæœãªã— -->
  <div class="bg-white rounded-2xl border border-gray-100 p-8 text-center">
    <div class="text-4xl mb-3">ğŸ”</div>
    <p class="font-bold text-gray-700 mb-2">ã¾ã æ——ãŒã‚ã‚Šã¾ã›ã‚“</p>
    <p class="text-sm text-gray-500 leading-relaxed">
      ã“ã®æ¡ä»¶ã®æ——ã¯ã¾ã ç«‹ã£ã¦ã„ã¾ã›ã‚“ã€‚<br>ã‚ãªãŸãŒæœ€åˆã«ç«‹ã¦ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ
    </p>
    <a href="/create/step1"
       class="inline-block mt-5 bg-orange-500 text-white font-bold py-3 px-6 rounded-2xl hover:bg-orange-600 transition-colors text-sm">
      æ——ã‚’ç«‹ã¦ã‚‹ â†’
    </a>
  </div>
{% endif %}

<!-- æ¡ä»¶ã‚’å¤‰ãˆã¦æ¢ã™ -->
<div class="mt-6 text-center">
  <a href="/find/step1" class="text-sm text-gray-400 hover:text-orange-500 transition-colors">
    â† æ¡ä»¶ã‚’å¤‰ãˆã¦æ¢ã—ç›´ã™
  </a>
</div>

{% endblock %}
